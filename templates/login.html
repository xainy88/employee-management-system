{% extends "base.html" %}

{% block content %}
<div class="login-container">
    <div class="row justify-content-center align-items-center min-vh-100">
        <div class="col-xl-5 col-lg-6 col-md-8">
            <!-- Login Card -->
            <div class="card login-card shadow-lg border-0">
                <div class="card-body p-5">
                    <!-- Header -->
                    <div class="text-center mb-4">
                        <div class="login-icon bg-primary">
                            <i class="fas fa-users"></i>
                        </div>
                        <h2 class="login-title fw-bold mt-3">Employee Manager</h2>
                        <p class="text-muted">Login to your account</p>
                    </div>

                    <!-- User Type Selection -->
                    <div class="user-type-selection mb-4">
                        <div class="btn-group w-100" role="group">
                            <input type="radio" class="btn-check" name="user_type" id="employee_login" value="employee" checked>
                            <label class="btn btn-outline-primary" for="employee_login">
                                <i class="fas fa-user me-2"></i>Employee Login
                            </label>
                            
                            <input type="radio" class="btn-check" name="user_type" id="admin_login" value="admin">
                            <label class="btn btn-outline-primary" for="admin_login">
                                <i class="fas fa-cog me-2"></i>Admin Login
                            </label>
                        </div>
                    </div>

                    <!-- Login Form -->
                    <form method="POST" action="{{ url_for('login') }}" class="login-form" id="loginForm">
                        <!-- Hidden field for user type -->
                        <input type="hidden" name="user_type" id="userType" value="employee">
                        
                        <!-- Username/Employee ID Field -->
                        <div class="mb-3" id="usernameField">
                            <label for="username" class="form-label fw-semibold">
                                <i class="fas fa-id-card me-2 text-primary"></i>Employee ID
                            </label>
                            <div class="input-group">
                                <span class="input-group-text bg-light border-end-0">
                                    <i class="fas fa-id-card text-muted"></i>
                                </span>
                                <input type="text" class="form-control border-start-0 ps-2" 
                                       id="username" name="username" placeholder="Enter your Employee ID" required>
                            </div>
                        </div>

                        <!-- Password Field (initially hidden) -->
                        <div class="mb-4" id="passwordField" style="display: none;">
                            <label for="password" class="form-label fw-semibold">
                                <i class="fas fa-lock me-2 text-primary"></i>Password
                            </label>
                            <div class="input-group">
                                <span class="input-group-text bg-light border-end-0">
                                    <i class="fas fa-lock text-muted"></i>
                                </span>
                                <input type="password" class="form-control border-start-0 ps-2" 
                                       id="password" name="password" placeholder="Enter admin password" required>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-lg w-100 py-3 login-btn">
                            <i class="fas fa-sign-in-alt me-2"></i>Log In
                        </button>
                    </form>

                    <!-- Credentials Info -->
                    <div class="credentials-info mt-4 p-4 rounded">
                        <h6 class="text-center mb-3 fw-semibold">
                            <i class="fas fa-key me-2 text-primary"></i>Login Credentials
                        </h6>
                        
                        <!-- Employee Credentials -->
                        <div id="employeeCredentials">
                            <p class="text-center mb-3 small text-muted">Use your Employee ID to login</p>
                            <div class="row text-center">
                                <div class="col-12">
                                    <div class="credential-item">
                                        <i class="fas fa-id-card text-primary mb-2"></i>
                                        <p class="mb-1 small fw-semibold">Employee IDs</p>
                                        <p class="mb-0 text-dark fw-bold">0001, 0002, 0003</p>
                                        <small class="text-muted">No password required</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Admin Credentials -->
                        <div id="adminCredentials" style="display: none;">
                            <p class="text-center mb-3 small text-muted">Use admin credentials to login</p>
                            <div class="row text-center">
                                <div class="col-6">
                                    <div class="credential-item">
                                        <i class="fas fa-user-cog text-primary mb-2"></i>
                                        <p class="mb-1 small fw-semibold">Username</p>
                                        <p class="mb-0 text-dark fw-bold">admin</p>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="credential-item">
                                        <i class="fas fa-lock text-primary mb-2"></i>
                                        <p class="mb-1 small fw-semibold">Password</p>
                                        <p class="mb-0 text-dark fw-bold">Contact System Administrator</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const employeeLogin = document.getElementById('employee_login');
    const adminLogin = document.getElementById('admin_login');
    const userTypeField = document.getElementById('userType');
    const usernameField = document.getElementById('usernameField');
    const passwordField = document.getElementById('passwordField');
    const employeeCredentials = document.getElementById('employeeCredentials');
    const adminCredentials = document.getElementById('adminCredentials');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    
    function updateLoginType() {
        if (adminLogin.checked) {
            userTypeField.value = 'admin';
            usernameField.querySelector('label').innerHTML = '<i class="fas fa-user me-2 text-primary"></i>Username';
            usernameInput.placeholder = 'Enter admin username';
            usernameInput.value = 'admin'; // Auto-fill admin username
            usernameField.querySelector('.input-group-text i').className = 'fas fa-user text-muted';
            passwordField.style.display = 'block';
            passwordInput.required = true;
            passwordInput.value = ''; // Clear password field for security
            employeeCredentials.style.display = 'none';
            adminCredentials.style.display = 'block';
        } else {
            userTypeField.value = 'employee';
            usernameField.querySelector('label').innerHTML = '<i class="fas fa-id-card me-2 text-primary"></i>Employee ID';
            usernameInput.placeholder = 'Enter your Employee ID';
            usernameInput.value = ''; // Clear the input
            usernameField.querySelector('.input-group-text i').className = 'fas fa-id-card text-muted';
            passwordField.style.display = 'none';
            passwordInput.required = false;
            passwordInput.value = ''; // Clear the input
            employeeCredentials.style.display = 'block';
            adminCredentials.style.display = 'none';
        }
    }
    
    employeeLogin.addEventListener('change', updateLoginType);
    adminLogin.addEventListener('change', updateLoginType);
    
    // Initialize
    updateLoginType();
});
</script>
{% endblock %}